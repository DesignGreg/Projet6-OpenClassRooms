{"code":"!function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,\"a\",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p=\"\",o(o.s=0)}([function(t,e,o){\"use strict\";$(document).ready(function(){function t(t){this.name=t}function e(t,e){this.name=t,this.damage=e}function o(t,e,o){this.name=t,this.health=e,this.weapon=o}function n(t,e,o){this.width=t,this.height=e,this.display=o,this.turn=1,this.forbiddenPosition=[],this.chartBoard=this.resetBoard(),this.generateGame()}function a(){n.call(this)}n.prototype=Object.create(a.prototype),a.prototype.constructor=a,$(\"#start\").click(function(){const s=$(\"#board\").get(0).getContext(\"2d\");a.prototype.drawBoard=function(){for(var t=0;t<board.width;t++)for(var e=0;e<board.height;e++)s.strokeStyle=\"rgba(0, 0, 0, 0.7)\",s.beginPath(),s.strokeRect(64*e,64*t,64,64),s.closePath()},a.prototype.loadObstaclesImages=function(t,e){const o=64*t.x,n=64*t.y,a=new Image;a.onload=function(){s.drawImage(a,o,n)},a.src=e},a.prototype.loadWeaponsPlayersImages=function(t,e){const o=64*[t.x],n=64*[t.y],a=new Image;a.onload=function(){s.drawImage(a,o+a.width/2,n+a.height/2)},a.src=e},a.prototype.addOnDom=function(t,e){$(\".canvas\").css(\"visibility\",\"visible\"),$(\".canvas\").addClass(\"animated slideInUp\"),$(\".canvas-side__left\").css(\"visibility\",\"visible\"),$(\".canvas-side__right\").css(\"visibility\",\"visible\"),$(\".canvas-side__left\").addClass(\"animated slideInLeft\"),$(\".canvas-side__right\").addClass(\"animated slideInRight\"),$(\"#start\").css(\"visibility\",\"hidden\"),$(\".canvas-side__left\").html(\"<h2 class='canvas-side--title'>\"+t.name+\"</h2><p class='canvas-side--health'>\"+t.health+\"</p><p class='canvas-side--health'>\"+t.weapon.name+\"</p>\"),$(\".canvas-side__right\").html(\"<h2 class='canvas-side--title'>\"+e.name+\"</h2><p class='canvas-side--health'>\"+e.health+\"</p><p class='canvas-side--health'>\"+e.weapon.name+\"</p>\")},n.prototype.resetBoard=function(){const t=[];for(let e=0;e<this.width;e++){const e=[];t.push(e);for(let t=0;t<this.height;t++){const t={};e.push(t)}}return t},n.prototype.generateGame=function(){const n=[new t(\"Lave\"),new t(\"Lave1\"),new t(\"Lave2\"),new t(\"Lave3\"),new t(\"Lave4\"),new t(\"Lave5\"),new t(\"Lave6\"),new t(\"Lave7\"),new t(\"Lave8\"),new t(\"Lave9\")],s=new e(\"Dague\",5),i=[s,new e(\"Epée\",10),new e(\"Hache\",15),new e(\"Fléau\",20)];let r=this.getRandomWeapons(4,i),c=n.concat(r);const h=new o(\"Joueur 1\",100,s),p=new o(\"Joueur 2\",100,s),l=[h,p];this.setObstaclesWeapons(c),this.setPlayers(l),a.prototype.drawBoard(),a.prototype.addOnDom(h,p)},n.prototype.getRandomWeapons=function(t,e){const o=[];for(let n=0;n<t;n++){let t=Math.floor(Math.random()*e.length);o.push(e[t])}return o},n.prototype.generatePieceLocation=function(t){let e;do{e=this.generateRandomLocation()}while(this.isPositionInArray(e,t));return e},n.prototype.generatePlayerLocation=function(t){let e;do{e=this.generateRandomLocation()}while(this.isPositionInArray(e,t)||!this.isLocationCorrectForPlayer(e));return e},n.prototype.generateRandomLocation=function(){return{x:Math.floor(Math.random()*this.width),y:Math.floor(Math.random()*this.height)}},n.prototype.setPiece=function(t,e){if(e.x>=this.width||e.y>=this.height)throw new Error(\"Pièce hors limite\");this.chartBoard[e.y][e.x]=t,this.forbiddenPosition.push(e)},n.prototype.setObstaclesWeapons=function(t){for(let o of t){const t=this.generatePieceLocation(this.forbiddenPosition);o instanceof e&&\"Dague\"===o.name?a.prototype.loadWeaponsPlayersImages(t,\"../assets/dague.png\"):o instanceof e&&\"Epée\"===o.name?a.prototype.loadWeaponsPlayersImages(t,\"../assets/epee.png\"):o instanceof e&&\"Hache\"===o.name?a.prototype.loadWeaponsPlayersImages(t,\"../assets/hache.png\"):o instanceof e&&\"Fléau\"===o.name?a.prototype.loadWeaponsPlayersImages(t,\"../assets/fleau.png\"):a.prototype.loadObstaclesImages(t,\"../assets/lave64.png\"),this.setPiece(o,t)}},n.prototype.setPlayers=function(t){for(let e of t){const o=this.generatePlayerLocation(this.forbiddenPosition);switch(e){case t[0]:a.prototype.loadWeaponsPlayersImages(o,\"../assets/joueur1.png\");break;case t[1]:a.prototype.loadWeaponsPlayersImages(o,\"../assets/joueur2.png\")}this.setPiece(e,o)}},n.prototype.isLocationCorrectForPlayer=function(t){const{x:e,y:n}=t;if(0===t.y){if(this.chartBoard[n][e+1]instanceof o||this.chartBoard[n+1][e]instanceof o||this.chartBoard[n][e-1]instanceof o)return!1}else if(9===t.y){if(this.chartBoard[n][e+1]instanceof o||this.chartBoard[n-1][e]instanceof o||this.chartBoard[n][e-1]instanceof o)return!1}else if(0===t.x){if(this.chartBoard[n][e+1]instanceof o||this.chartBoard[n+1][e]instanceof o||this.chartBoard[n-1][e]instanceof o)return!1}else if(9===t.x){if(this.chartBoard[n+1][e]instanceof o||this.chartBoard[n-1][e]instanceof o||this.chartBoard[n][e-1]instanceof o)return!1}else if(this.chartBoard[n][e+1]instanceof o||this.chartBoard[n+1][e]instanceof o||this.chartBoard[n-1][e]instanceof o||this.chartBoard[n][e-1]instanceof o)return!1;return!0},n.prototype.isPositionInArray=function(t,e){return e.some(e=>e.x===t.x&&e.y===t.y)};const i=new n(10,10,n);console.log(i)}),n.prototype.doTurn=function(t){},n.prototype.switchTurn=function(){$(document).on(\"keypress\",function(t){if(13==t.which||1===this.turn){player2;t.stopPropagation()}if(13==t.which||2===this.turn){player1;t.stopPropagation()}return activePlayer})},n.prototype.showMovement=function(t){},n.prototype.checkAvailableSquares=function(t){},n.prototype.movePlayer=function(t){$(document).on(\"keypress\",function(t){t.which,t.which,t.which,t.which})},n.prototype.endMovement=function(t){},n.prototype.walkOnWeapon=function(t){},n.prototype.switchWeapon=function(t){}})}]);","extractedComments":[]}